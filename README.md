# Voice SHUT UP Telegram Bot

[![Go Version](https://img.shields.io/badge/go-1.24%2B-blue.svg)](https://golang.org)
[![made-with-Go](https://img.shields.io/badge/Made%20with-Go-1f425f.svg)](http://golang.org)

Этот Telegram-бот транскрибирует голосовые сообщения, видео, видео-кружочки и аудиофайлы, а затем создает их краткое и развернутое резюме с помощью Google Gemini AI.

## Особенности

-   **Высокая производительность**: Написан на компилируемом языке Go, что обеспечивает минимальное потребление CPU и памяти.
-   **Поддержка медиа**: Обрабатывает **голосовые сообщения, видео, видео-кружочки** и аудиофайлы (`mp3`, `wav`, `oga`).
-   **Интеграция с Gemini AI**: Использует актуальные модели `gemini-2.5-flash` и `gemini-2.0-flash` (по состоянию на лето 2025 г.).
-   **Надежность**: Встроена логика ретраев и переключения на резервную модель (`fallback`) при сбоях API.
-   **Гибкая настройка**: Названия моделей и все системные промпты легко настраиваются через переменные окружения.
-   **Фича суммарайза**: Генерирует стандартное резюме .

## Технологический стек

-   **Язык**: Go (1.24+)
-   **Взаимодействие с AI**: `google.golang.org/genai`
-   **Взаимодействие с Telegram**: Стандартная библиотека `net/http`
-   **Обработка медиа**: `ffmpeg` (требуется для конвертации)
-   **Развертывание**: Docker & Docker Compose

## Установка и запуск

### Шаг 1: Предварительные требования

-   [Git](https://git-scm.com/)
-   [Docker](https://www.docker.com/) и [Docker Compose](https://docs.docker.com/compose/)
-   Для локальной разработки: [Go 1.24+](https://go.dev/dl/) и `ffmpeg` в системном `PATH`.


### Шаг 2: Конфигурация

Создайте файл `.env` в корневой директории проекта, скопировав в него содержимое ниже.

```dotenv
# =======================================
#        ОБЯЗАТЕЛЬНЫЕ ПЕРЕМЕННЫЕ
# =======================================

# Токен вашего Telegram бота, полученный от @BotFather
BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
# Ключ API для Google Gemini, полученный из Google AI Studio
GOOGLE_API_KEY=AIzaSyA...

# =======================================
#        ОПЦИОНАЛЬНЫЕ ПЕРЕМЕННЫЕ
# (Если не указаны, используются значения по умолчанию)
# =======================================

# --- Настройка моделей Gemini ---
# Основная, более быстрая модель для большинства задач
PRIMARY_MODEL=gemini-2.5-flash
# Резервная, более мощная модель на случай сбоя основной
FALLBACK_MODEL=gemini-2.0-flash

# --- Настройка промптов для суммирования ---
# Системный промпт, задающий роль и стиль ответов ассистента
# SYSTEM_PROMPT="Вы - ассистент..."

# Шаблон основного промпта. %s будет заменен на транскрипцию.
# USER_PROMPT_TEMPLATE="Сделай резюме для этого текста: %s"

# Шаблон для создания супер-краткого резюме. %s будет заменен на транскрипцию.
# SHORT_PROMPT_TEMPLATE="Выдели главную мысль в 1-2 предложениях из этого: %s"
```

### Шаг 4: Запуск через Docker

```bash
docker compose up --build -d
```

Проверить логи можно командой:
```bash
docker compose logs -f
```

## Использование

### Основной сценарий

1.  Отправьте боту голосовое сообщение, видео, видео-кружочек или аудиофайл.
2.  Бот ответит сообщением о том, что файл принят в обработку.
3.  Через некоторое время бот пришлет два сообщения:
    -   **Transcription**: Полная текстовая расшифровка аудио.
    -   **Summary**: Структурированное резюме, скрытое под спойлером для удобства.